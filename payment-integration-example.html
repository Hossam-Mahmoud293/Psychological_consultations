<!DOCTYPE html>
<html lang="ar" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>مثال تكامل الدفع</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <section class="section">
      <div class="container">
        <div class="payment-options">
          <h2>اختر طريقة الدفع</h2>

          <!-- PayPal Integration -->
          <div class="payment-method">
            <h3>الدفع عبر PayPal</h3>
            <div id="paypal-button-container"></div>
          </div>

          <!-- Stripe Integration -->
          <div class="payment-method">
            <h3>الدفع بالبطاقة</h3>
            <form id="payment-form">
              <div class="field">
                <span>رقم البطاقة</span>
                <input
                  type="text"
                  id="card-number"
                  placeholder="1234 5678 9012 3456"
                />
              </div>
              <div class="form-group-inline">
                <div class="field">
                  <span>تاريخ الانتهاء</span>
                  <input type="text" id="card-expiry" placeholder="MM/YY" />
                </div>
                <div class="field">
                  <span>CVV</span>
                  <input type="text" id="card-cvv" placeholder="123" />
                </div>
              </div>
              <button type="submit" class="btn btn-primary btn-full">
                دفع آمن
              </button>
            </form>
          </div>

          <!-- Bank Transfer Option -->
          <div class="payment-method">
            <h3>التحويل البنكي</h3>
            <div class="bank-details">
              <p><strong>اسم الحساب:</strong> اسمك/شركتك</p>
              <p><strong>رقم الحساب:</strong> SA1234567890123456789012</p>
              <p><strong>اسم البنك:</strong> البنك الأهلي</p>
              <p><strong>IBAN:</strong> SA89 3000 0000 0000 0000 0000</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- PayPal SDK -->
    <script src="https://www.paypal.com/sdk/js?client-id=YOUR_CLIENT_ID&currency=SAR"></script>

    <!-- Stripe JS -->
    <script src="https://js.stripe.com/v3/"></script>

    <script>
      // PayPal Integration
      paypal
        .Buttons({
          createOrder: function (data, actions) {
            return actions.order.create({
              purchase_units: [
                {
                  amount: {
                    value: "299.00", // السعر
                    currency: "SAR",
                  },
                },
              ],
            });
          },
          onApprove: function (data, actions) {
            return actions.order.capture().then(function (details) {
              alert(
                "تم الدفع بنجاح! شكراً لك " + details.payer.name.given_name
              );
              // إرسال بيانات الدفع لسيرفرك
            });
          },
        })
        .render("#paypal-button-container");

      // Stripe Integration
      const stripe = Stripe("YOUR_PUBLISHABLE_KEY");
      const elements = stripe.elements();

      const cardElement = elements.create("card");
      cardElement.mount("#card-element");

      document
        .getElementById("payment-form")
        .addEventListener("submit", async (e) => {
          e.preventDefault();

          const { error, paymentMethod } = await stripe.createPaymentMethod({
            type: "card",
            card: cardElement,
          });

          if (error) {
            console.error(error);
          } else {
            // إرسال paymentMethod.id لسيرفرك
            console.log("PaymentMethod:", paymentMethod);
          }
        });
    </script>
  </body>
</html>
